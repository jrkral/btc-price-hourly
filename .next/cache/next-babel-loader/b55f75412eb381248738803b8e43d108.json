{"ast":null,"code":"import Cors from 'cors';\nimport loadMiddleware from '../../lib/loadMiddleware';\nimport getTwitterClient from '../../lib/getTwitterClient';\nimport getBTCData from '../../lib/getBTCData';\n\nconst formatUSD = number => {\n  return number.toLocaleString('en-US', {\n    style: 'currency',\n    currency: 'USD'\n  });\n};\n\nexport default (async (req, res) => {\n  try {\n    const cors = Cors({\n      methods: ['GET']\n    });\n    await loadMiddleware(req, res, cors);\n    const twitter = await getTwitterClient();\n    const btc = await getBTCData();\n\n    const chartIcon = val => val > 0 ? '🟢 +' : '🔴 ';\n\n    const status = `1 $BTC = ${formatUSD(btc.price)} $USD\n\t\t\t\t\t\t${chartIcon(btc.percChange)}${btc.percChange.toFixed(2)}% chg/24h\\n\n\t\t\t\t\t\t#Bitcoin #BTC #Crypto #Cryptocurrency`;\n    console.log('🐦 Posting tweet...');\n    await twitter.post('statuses/update', {\n      status\n    });\n    console.log('🐦 Tweet posted!');\n    res.status(200).send('🐦 Tweet posted!');\n  } catch (error) {\n    res.status(500).send('Server error');\n    console.error(error);\n  }\n});","map":{"version":3,"sources":["/home/travis/Repos/btc-hourly-price/pages/api/post-btc-data.js"],"names":["Cors","loadMiddleware","getTwitterClient","getBTCData","formatUSD","number","toLocaleString","style","currency","req","res","cors","methods","twitter","btc","chartIcon","val","status","price","percChange","toFixed","console","log","post","send","error"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,MAAjB;AAEA,OAAOC,cAAP,MAA2B,0BAA3B;AACA,OAAOC,gBAAP,MAA6B,4BAA7B;AACA,OAAOC,UAAP,MAAuB,sBAAvB;;AAEA,MAAMC,SAAS,GAAGC,MAAM,IAAI;AAC3B,SAAOA,MAAM,CAACC,cAAP,CAAsB,OAAtB,EAA+B;AAAEC,IAAAA,KAAK,EAAE,UAAT;AAAqBC,IAAAA,QAAQ,EAAE;AAA/B,GAA/B,CAAP;AACA,CAFD;;AAIA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAClC,MAAI;AACH,UAAMC,IAAI,GAAGX,IAAI,CAAC;AACjBY,MAAAA,OAAO,EAAE,CAAC,KAAD;AADQ,KAAD,CAAjB;AAIA,UAAMX,cAAc,CAACQ,GAAD,EAAMC,GAAN,EAAWC,IAAX,CAApB;AAEA,UAAME,OAAO,GAAG,MAAMX,gBAAgB,EAAtC;AACA,UAAMY,GAAG,GAAG,MAAMX,UAAU,EAA5B;;AAEA,UAAMY,SAAS,GAAGC,GAAG,IAAKA,GAAG,GAAG,CAAN,GAAU,MAAV,GAAmB,KAA7C;;AAEA,UAAMC,MAAM,GAAI,YAAWb,SAAS,CAACU,GAAG,CAACI,KAAL,CAAY;AAClD,QAAQH,SAAS,CAACD,GAAG,CAACK,UAAL,CAAiB,GAAEL,GAAG,CAACK,UAAJ,CAAeC,OAAf,CAAuB,CAAvB,CAA0B;AAC9D,4CAFE;AAIAC,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACA,UAAMT,OAAO,CAACU,IAAR,CAAa,iBAAb,EAAgC;AAAEN,MAAAA;AAAF,KAAhC,CAAN;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AAEAZ,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB,kBAArB;AACA,GArBD,CAqBE,OAAOC,KAAP,EAAc;AACff,IAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB,cAArB;AACAH,IAAAA,OAAO,CAACI,KAAR,CAAcA,KAAd;AACA;AACD,CA1BD","sourcesContent":["import Cors from 'cors'\n\nimport loadMiddleware from '../../lib/loadMiddleware'\nimport getTwitterClient from '../../lib/getTwitterClient'\nimport getBTCData from '../../lib/getBTCData'\n\nconst formatUSD = number => {\n\treturn number.toLocaleString('en-US', { style: 'currency', currency: 'USD' })\n}\n\nexport default async (req, res) => {\n\ttry {\n\t\tconst cors = Cors({\n\t\t\tmethods: ['GET'],\n\t\t})\n\n\t\tawait loadMiddleware(req, res, cors)\n\n\t\tconst twitter = await getTwitterClient()\n\t\tconst btc = await getBTCData()\n\n\t\tconst chartIcon = val => (val > 0 ? '🟢 +' : '🔴 ')\n\n\t\tconst status = `1 $BTC = ${formatUSD(btc.price)} $USD\n\t\t\t\t\t\t${chartIcon(btc.percChange)}${btc.percChange.toFixed(2)}% chg/24h\\n\n\t\t\t\t\t\t#Bitcoin #BTC #Crypto #Cryptocurrency`\n\n\t\tconsole.log('🐦 Posting tweet...')\n\t\tawait twitter.post('statuses/update', { status })\n\t\tconsole.log('🐦 Tweet posted!')\n\n\t\tres.status(200).send('🐦 Tweet posted!')\n\t} catch (error) {\n\t\tres.status(500).send('Server error')\n\t\tconsole.error(error)\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}